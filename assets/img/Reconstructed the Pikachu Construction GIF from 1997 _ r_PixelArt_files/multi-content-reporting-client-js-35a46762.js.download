import{_ as t,n as e,h as s,s as i,x as n}from"./icon-29bbe755.js";import{F as a}from"./faceplate-tabgroup-9f2cff7e.js";import{f as o}from"./post-c7a2ad6d.js";import{R as l}from"./helpers-093c3384.js";import"./faceplate-checkbox-input-e8cb9934.js";import"./faceplate-tabpanel-15052681.js";import"./shell-38e4146f.js";import"./faceplate-tablist-3e2e6bea.js";import"./pageable-832f4cce.js";import"./post-69fe4f77.js";import"./checked-input-element-49c8b895.js";import"./faceplate-input-6da71712.js";import"./input-element-5b4d45e2.js";import"./form-common-utils-52a96849.js";import"./constants-17b30c47.js";var c;!function(t){t.ADDITION="addition",t.REMOVAL="removal"}(c||(c={}));let r=class extends i{constructor(){super(...arguments),this.selectLimit=2,this.initEventListeners=()=>{this.allInputs?.forEach((t=>{t.addEventListener("input",this.handleClick)}));this.querySelectorAll("temporary-tabgroup button")?.forEach((t=>{t.addEventListener("click",this.resetPanelScroll)}));this.querySelectorAll(".empty-state-button")?.forEach((t=>{t.addEventListener("click",this.toggleEmptyState)}))},this.resetPanelScroll=async()=>{await this.updateComplete,this.tabpanel?.scrollTo(0,0)},this.populateValues=()=>{const t=this.helpers?.getHiddenInputValue("additionalContent");if(!t)return;const e=t?.split(",");this.populateCheckboxSelections(e),this.populateBadgeCounts(e)},this.populateCheckboxSelections=t=>{const e=t.length===this.selectLimit;this.allInputs.forEach((s=>{t?.includes(s.getAttribute("data-value")??"")?s.checked=!0:e&&(s.disabled=!0)}))},this.populateBadgeCounts=t=>{const e=t.reduce(((t,e)=>o(e)?{...t,posts:t.posts+1}:e.startsWith("t1_")?{...t,comments:t.comments+1}:t),{posts:0,comments:0}),s=this.querySelectorAll("temporary-tabgroup span[rpl] span");s[0].textContent=e.posts.toString(),s[1].textContent=e.comments.toString()},this.toggleEmptyState=t=>{const e=this.tabpanel,s=t.currentTarget.getAttribute("slot")?.split("-")[1];e?.setAttribute("pageindex",`${s}`)},this.disableAllUnchecked=()=>{this.uncheckedInputs.forEach((t=>{t.disabled=!0}))},this.enableAllUnchecked=()=>{this.uncheckedInputs.forEach((t=>{t.removeAttribute("disabled")}))},this.modifyList=(t,e)=>{if(!t)return{modificationType:c.ADDITION,newList:[e]};const s=t.split(",");return s.includes(e)?{modificationType:c.REMOVAL,newList:s.filter((t=>t!==e))}:{modificationType:c.ADDITION,newList:[...s,e]}},this.updateBadgeCounts=t=>{const e=this.querySelector("temporary-tabgroup [faceplate-tab-selected]")?.querySelector("span[rpl] span");if(!e)return;const s=Number(e.textContent);t===c.ADDITION&&(e.textContent=`${s+1}`),t===c.REMOVAL&&(e.textContent=""+(s-1))},this.handleClick=async t=>{t.preventDefault(),t.stopPropagation();const e=t.currentTarget?.getAttribute("data-value")??"",s=this.helpers?.getHiddenInputValue("additionalContent")??"";if(!e)return;const{modificationType:i,newList:n}=this.modifyList(s,e);this.updateBadgeCounts(i),this.helpers?.setHiddenInputValue("additionalContent",n.toString()),await this.updateComplete,n.length===this.selectLimit?this.disableAllUnchecked():s.split(",").length===this.selectLimit&&this.enableAllUnchecked()}}get uncheckedInputs(){return this.querySelectorAll("faceplate-checkbox-input:not([checked])")}get allInputs(){return this.querySelectorAll("faceplate-checkbox-input")}get tabpanel(){return this.querySelector("faceplate-tabpanel")}connectedCallback(){super.connectedCallback(),this.initEventListeners();const t=this.getRootNode().host?.closest("report-form");t&&(this.helpers=new l(t)),this.populateValues()}disconnectedCallback(){super.disconnectedCallback()}render(){return n`<slot></slot>`}};t([e({type:Number,attribute:"select-limit"})],r.prototype,"selectLimit",void 0),r=t([s("multi-content-wrapper")],r);let p=class extends a{connectedCallback(){super.connectedCallback(),this._events._events.delete("click"),this._events.define("click",(t=>{const e=t.composedPath();for(let t=0;t<e.length;t++){const s=e[t];if(s instanceof HTMLSpanElement){const t=this.getPageIndexFromSpanWrapper(s);if(0!==t){this.pageIndex=t;break}}}}))}};p=t([s("temporary-tabgroup")],p);
//# sourceMappingURL=multi-content-reporting-client-js-35a46762.js.map
