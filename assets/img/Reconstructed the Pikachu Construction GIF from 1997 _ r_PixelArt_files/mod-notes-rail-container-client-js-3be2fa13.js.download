import{i as e,_ as s,j as t,n as o,s as l,x as i,q as a,I as d,h as n}from"./icon-29bbe755.js";import{a as r,t as c,k as h,b as p,_ as u}from"./shell-38e4146f.js";import{t as m}from"./throttle-cde4a556.js";import{c as C,d as b,e as y}from"./mod-notes-6691414f.js";const S=r(l);let k=class extends S{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.openModNoteRail=async e=>{const s=document.getElementById(C);try{const t=this.querySelector(`faceplate-partial[name="${b}"]`),o=this.querySelector(`shreddit-async-loader[name="${b}"]`);if(!t||!o)return;this.classList.remove("hidden"),t.classList.add("hidden"),s?.classList.remove("hidden");let l=y;for(const s in e){const t=e[s];l=l.replace(`/:${s}`,`/${t}`)}t.src=l,this.isModNotesRailClientSourceLoaded?await t.load():(await Promise.allSettled([o.load(),t.load()]),this.isModNotesRailClientSourceLoaded=!0),s?.classList.add("hidden"),t.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=m(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),this.publish(h.ModNotesRailClose)}}connectedCallback(){super.connectedCallback(),this.subscribe(h.ModNotesRailOpen,this.openModNoteRail,!1),this.subscribe(h.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(h.ModNotesRailOpen,this.openModNoteRail),this.unsubscribe(h.ModNotesRailForceClose,this.handleCloseClick),document.removeEventListener("scroll",this.onScrollHandlerThrottled)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return i`\n <slot></slot>\n <div \n class="absolute top-md right-md z-10" \n @click="${this.handleCloseClick}" \n @keyup="${this.handleCloseKeyboardEnter}" \n>\n ${p({leadingIcon:a({size:d.Small}),size:u.Small,attributes:{className:"opacity-80 button-media"}})}\n </div>\n `}};k.styles=[c,e`:host{display:block}`],s([t()],k.prototype,"isModNotesRailClientSourceLoaded",void 0),s([o({type:Boolean,attribute:"is-pdp"})],k.prototype,"isPDP",void 0),k=s([n("mod-notes-rail-closer")],k);
//# sourceMappingURL=mod-notes-rail-container-client-js-3be2fa13.js.map
